<!doctype html>
<html lang="ar">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="https://www.fontstatic.com/f=rabar" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://unpkg.com/aos@2.3.1/dist/aos.css"
    />
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://unpkg.com/@themesberg/flowbite@1.2.0/dist/flowbite.min.css" />

    <link rel="stylesheet" type="text/css" href="css/common.css" />
    <link rel="stylesheet" type="text/css" href="css/fonts.css" />
    <link rel="stylesheet" type="text/css" href="css/page11.css" />
  <title>متقدم</title>
    <script
      type="text/javascript"
      src="https://unpkg.com/aos@2.3.1/dist/aos.js"
    ></script>
    <script
      type="text/javascript"
      src="https://unpkg.com/headroom.js@0.12.0/dist/headroom.min.js"
    ></script>
    <link href="https://unpkg.com/tailwindcss@2.0.2/dist/tailwind.min.css" rel="stylesheet">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script>
      // On page load or when changing themes, best to add inline in `head` to avoid FOUC
      if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark');
      } else {
          document.documentElement.classList.remove('dark')
      }
  </script>
</head>
<body style="width: 100vw;" class=" flex items-center justify-center dark:bg-gray-800" >
    <style>
    body{background:white;}
</style>
<div class="page1 page1-group justify-center layout dark:bg-gray-800">
      <div style="margin-top:200px" class=" ">


<div class="flex flex-col justify-center items-center">
  <!-- Information Modal -->
	<div id="help" style="position:absolute; top: 30px; display:none;" class="md:w-1/3 justify-center sm:w-full rounded-lg shadow-lg bg-white my-3 ">
        <div class="flex justify-between border-b border-gray-100 px-5 py-4">
          <div>
              <button id="c1" ><i class="fa fa-times-circle text-red-500 hover:text-red-600 transition duration-150"></i></button>
            </div>
        	<div>
              <span style="font-family:rabar;"  class="font-bold text-gray-700 text-lg">فزعة</span>
              <i class="fas fa-exclamation-circle text-blue-500"></i>

          	</div>

      	</div>

      	<div style="font-family:rabar;" dir="rtl" class="px-10 py-5 text-gray-600">
          هنا شرح مبسط للجدول
:      	</div>
        <div class="mt-5 flex gap-2	 justify-center border-b pb-4 flex-wrap	">
			<img src="https://i.ibb.co/9prNs6p/Untitled-2.png" class="bg-red-500 rounded-2xl w-1/3 object-cover h-96 flex-auto" alt="photo">

          </div>

          <div style="font-family:rabar;" dir="rtl" class="px-10 py-5 text-gray-600">
اللي بالاحمر هم الاسماء اللي بيندفع لهم
       	</div>
        <div style="font-family:rabar;" dir="rtl" class="px-10 py-5 text-gray-600">
اللي بالأخضر هم الأسماء اللي بيدفعون
      	</div>
        <div style="font-family:rabar;" dir="rtl" class="px-10 py-5 text-gray-600">
          اللي بالازرق هو ان محمد بيدفع لخالد 5 ريال
      	</div>

      	<div class="px-5 py-4 flex justify-start">
          <button  id="c" style="font-family:rabar;" dir="rtl"  class="text-sm py-2 px-3 text-gray-500 hover:text-gray-600 transition duration-150">إنهاء</button>
      	</div>
	</div>

<table class="rounded-t-lg m-5 w-5/6 mx-auto bg-gray-200 text-gray-800">

<!-- <tfoot><tr><td valign="bottom" colspan="100%" align="center"><div style="cursor: pointer;" onclick="window.location="Page1.html";" class="page1-cover-group layout1"><h3 class="new-subtitle4-box layout"><pre class="new-subtitle">New Qattah</pre></h3></div></td></tr></tfoot> -->
<tfoot>
<tr>
   <td valign="bottom" colspan="100%" align="center">


     <div class="">

       <button id="h" style="font-family:rabar;" dir="rtl"  class="text-sm py-2 px-3 text-gray-500 hover:text-gray-600 transition duration-150">التعليمات</button>

          <button onclick="window.location='index.html';" style="font-family:rabar;" dir="rtl"  class="text-sm py-2 px-3 text-gray-500 hover:text-gray-600 transition duration-150">قطة جديدة</button>





     </div>

   </td>

</tr>
</tfoot>
</table>


<!-- classic design -->




<div class="mb-20"></div>
</div>
<!-- fill for tailwind preview bottom overflow -->
<script>
var sessionstring =sessionStorage.getItem('TheArray1');
var n =JSON.parse(sessionstring);
var sessionstring =sessionStorage.getItem('TheArray');
var m=JSON.parse(sessionstring);



// scrpit

let li =m;
let pli =[];

let fli = new Array(li.length);

for (let i = 0; i < fli.length; i++) {
  fli[i] = new Array(fli.length);
}



let ifli = fli;




let sum = 0;

for (let i = 0; i < li.length; i++) {
    sum += li[i];
}

pli = li.map(x => x/sum);


let equ = sum/li.length;




for (let i = 0; i < li.length; i++) {

for (let j = 0; j < li.length; j++) {
    if(j==i){
        fli[i][j]=0;
    }
    else{
        fli[i][j]= pli[j]*equ;
    }

}
}



for (let i = 0; i < li.length; i++) {
if(pli[i]>0){
for (let j = 0; j < li.length; j++) {
    if(j==i){
        ifli[i][j]=0;
    }
    else{

        if(pli[i]>=pli[j]){
         ifli[i][j]=0;
        }
        else{
            ifli[i][j]=fli[i][j]-fli[j][i];
        }
    }

}
}
else{
    for (let j = 0; j < li.length; j++) {
        ifli[i][j]=fli[i][j];
    }
}
}

// end of script


var f1=[];
var f2=[];
var txt2=[]
for(let i=0;i<m.length;i++){
if (m[i]==0){}
else{
      var name1='p'+(i+1)
var name= '  '+(i+1)+' رقم';
if(n[i]==name1){
}
else{
  name=n[i];
}

f1[i]='<th class="px-4 py-3">'+name+'</th>';
// f2[i]='<td class="px-4 py-3">'+m[i]+'</td>';
}

}

f1.unshift('<th class="px-4 py-3">الأسماء</th>');
f1=f1.reverse();

txt1 = '<tr class="text-left border-b-2 border-gray-300">'+f1.join('')+'</tr>';





for (let i = 0; i < li.length; i++) {

  if (m[i]==0){var x= ifli[i];


  }
  else{
    var name1='p'+(i+1)
var name= '  '+(i+1)+' رقم';
if(n[i]==name1){
}
else{
name=n[i];
}
  f2.push('<td class="px-4 py-3">'+name+'</td>');

for (let j = 0; j < li.length; j++) {

    if(m[j]==0){
        // f2.push('<td class="px-4 py-3">0.00</td>');
    }
    else{
        f2.push('<td class="px-4 py-3">'+ifli[i][j].toFixed(1)+'</td>');
    }

}
f2=f2.reverse();
txt2.push('<tr class="bg-gray-100 border-b border-gray-200">'+f2.join('')+'</tr>');
f2=[];
}}





try{
  f2.push('<td class="px-4 py-3">الباقي</td>');
for (let i = 0; i < x.length; i++) {

  if(m[i]==0){
      // f2.push('<td class="px-4 py-3">0.00</td>');
  }
  else{
f2.push('<td class="px-4 py-3">'+x[i].toFixed(1)+'</td>');
}}
}
catch{f2.pop();}
f2=f2.reverse();
txt2.push('<tr class="bg-gray-100 border-b border-gray-200">'+f2.join('')+'</tr>');




$("table").append(txt1);

$("table").append(txt2);

$("#h").click(function(){
 $("#help").toggle("fast");
 });

 $("#c").click(function(){
  $("#help").toggle("fast");
  });
  $("#c1").click(function(){
   $("#help").toggle("fast");
   });



</script>
<script type="text/javascript">
  AOS.init();
</script>
</body>
</html>
